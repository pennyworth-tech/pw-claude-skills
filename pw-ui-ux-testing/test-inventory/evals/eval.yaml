skill: test-inventory
version: 1.0.0
description: Evaluation test suite for test inventory generation with quality gates

models_to_test:
  - claude-3.5-sonnet
  - claude-3-haiku

test_cases:
  - id: tc001_basic_inventory
    description: "Skill generates inventory for current directory"
    category: basic
    priority: critical
    input:
      prompt: "/test-inventory"
    expected_output:
      must_contain:
        - "totalTestFiles"
        - "services"
        - "qualityGates"
        - "tier"
      must_not_contain:
        - "error"
    validation:
      schema_check: true

  - id: tc002_specific_path
    description: "Skill generates inventory for a specific path"
    category: basic
    priority: critical
    input:
      prompt: "/test-inventory path:src/services/"
    expected_output:
      must_contain:
        - "targetPath"
        - "totalTestFiles"
        - "services"
    validation:
      schema_check: true

  - id: tc003_quality_gates
    description: "Output includes AISP quality gate results with tier"
    category: quality-gates
    priority: critical
    input:
      prompt: "/test-inventory"
    expected_output:
      must_contain:
        - "allServicesHaveTests"
        - "envVarsDocumented"
        - "searchLatencyUnder100ms"
        - "tier"
        - "rulesPassed"
    validation:
      schema_check: true

  - id: tc004_diff_mode
    description: "Skill computes diff against base branch"
    category: diff
    priority: high
    input:
      prompt: "/test-inventory diff --base main"
    expected_output:
      must_contain:
        - "changes"
        - "added"
        - "removed"
        - "testCountDelta"
    validation:
      schema_check: true

  - id: tc005_coverage_honesty
    description: "Coverage values include honesty note about estimation"
    category: integrity
    priority: high
    input:
      prompt: "/test-inventory"
    expected_output:
      must_contain:
        - "note"
        - "Estimated"
    validation:
      schema_check: true

  - id: tc006_fallback_no_aqe
    description: "Skill works even when aqe commands fail (Glob+Grep fallback)"
    category: resilience
    priority: high
    input:
      prompt: "/test-inventory"
      env:
        AQE_DISABLED: "true"
    expected_output:
      must_contain:
        - "totalTestFiles"
        - "services"
    validation:
      schema_check: true

success_criteria:
  pass_rate: 0.9
  critical_pass_rate: 1.0

metadata:
  author: "@pennyworth-tech"
  created: "2026-02-06"
  linear_issue: BL-241
